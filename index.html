<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ACL Runner</title>

<style>
  body {
    font-family: Arial;
    padding: 20px;
    background: #f7f7f7;
  }
  button {
    width: 100%;
    padding: 15px;
    font-size: 18px;
    background: #2563eb;
    color: white;
    border: none;
    border-radius: 8px;
  }
  .log {
    margin-top: 20px;
    padding: 12px;
    border-radius: 6px;
    background: white;
    font-size: 14px;
  }
  .success { color: green; }
  .error { color: red; }
  .running { color: orange; }
</style>
</head>

<body>

<h2>ACL Runner</h2>
<button onclick="runACL()">Run ACL</button>

<div id="output" class="log"></div>

<script>
async function runACL() {
  const output = document.getElementById("output");
  output.innerHTML = "‚è≥ Starting ACL run...<br>";

  try {
    const res = await fetch("/api/run-acl");
    const data = await res.json();

    data.steps.forEach(s => {
      const cls =
        s.status === "success" ? "success" :
        s.status === "error" ? "error" : "running";

      output.innerHTML +=
        `<div class="${cls}">
          ${s.status === "success" ? "‚úÖ" : s.status === "error" ? "‚ùå" : "‚è≥"}
          <b>${s.step}</b>
          ${s.message ? " - " + s.message : ""}
        </div>`;
    });

    if (data.success) {
      output.innerHTML += `<div class="success"><b>üéâ ACL run completed</b></div>`;
    }

  } catch (e) {
    output.innerHTML += `<div class="error">‚ùå UI Error: ${e.message}</div>`;
  }
}
</script>

</body>
</html>
